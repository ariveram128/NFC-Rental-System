# General system configuration
CONFIG_HEAP_MEM_POOL_SIZE=8192
CONFIG_ASSERT=y
CONFIG_REBOOT=y

# Logging
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_LOG_MODE_DEFERRED=y
CONFIG_LOG_BUFFER_SIZE=4096

# Enable Bluetooth with both roles
CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_CENTRAL=y
CONFIG_BT_BROADCASTER=y
CONFIG_BT_OBSERVER=y
CONFIG_BT_DEVICE_NAME="RentScan_Test"
CONFIG_BT_DEVICE_APPEARANCE=833

# Critical BLE controller settings
CONFIG_BT_HCI=y
CONFIG_BT_CTLR=y

# Increase controller resources
# CONFIG_BT_BUF_EVT_DISCARDABLE_COUNT=32
# CONFIG_BT_BUF_EVT_DISCARDABLE_SIZE=255
# CONFIG_BT_BUF_CMD_TX_COUNT=20
# CONFIG_BT_CTLR_RX_BUFFERS=16
# CONFIG_BT_CTLR_TX_BUFFERS=16
# CONFIG_BT_CTLR_TX_BUFFER_SIZE=251
# CONFIG_BT_CTLR_DUP_FILTER_LEN=0
# CONFIG_BT_CTLR_LE_ENC=y
# CONFIG_BT_CTLR_PHY=y
# CONFIG_BT_CTLR_PHY_2M=y
# CONFIG_BT_CTLR_ADVANCED_FEATURES=y
# CONFIG_BT_CTLR_SCAN_REQ_NOTIFY=y
# CONFIG_BT_CTLR_ADV_EXT=y

# Enable separate advertising and scanning instances
CONFIG_BT_MAX_CONN=4
CONFIG_BT_MAX_PAIRED=4 
CONFIG_BT_SMP=y
CONFIG_BT_GATT_CLIENT=y
CONFIG_BT_SCAN=y
CONFIG_BT_CONN_TX_MAX=10
CONFIG_BT_L2CAP_TX_BUF_COUNT=10
CONFIG_BT_BUF_ACL_TX_COUNT=10
CONFIG_BT_BUF_ACL_RX_COUNT=10

# Enhanced Bluetooth configuration
CONFIG_BT_GATT_DYNAMIC_DB=y
CONFIG_BT_SETTINGS=y
CONFIG_BT_L2CAP_TX_MTU=247
CONFIG_BT_BUF_ACL_TX_SIZE=251
CONFIG_BT_BUF_ACL_RX_SIZE=251

# Advanced controller settings to avoid resource contention
# CONFIG_BT_CTLR_DATA_LENGTH_MAX=251
# CONFIG_BT_CTLR_ADV_DATA_LEN_MAX=31
# CONFIG_BT_CTLR_ADV_DATA_BUF_MAX=4
# CONFIG_BT_CTLR_SCAN_DATA_LEN_MAX=31
# CONFIG_BT_CTLR_ADV_SET=2
CONFIG_BT_EXT_ADV=y
CONFIG_BT_EXT_ADV_MAX_ADV_SET=2

# Storage for settings
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_NVS=y
CONFIG_SETTINGS=y
CONFIG_SETTINGS_NVS=y
CONFIG_MPU_ALLOW_FLASH_WRITE=y

# Threading and scheduling
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=4096
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_INIT_STACKS=y

# Enable shell for interactive testing
CONFIG_SHELL=y
CONFIG_SHELL_PROMPT_UART="rentscan_test:~$ "
CONFIG_SHELL_CMDS=y
CONFIG_SHELL_STATS=y
CONFIG_SHELL_HISTORY=y
CONFIG_SHELL_VT100_COLORS=y

# Enable Zephyr ZTEST framework
CONFIG_ZTEST=y